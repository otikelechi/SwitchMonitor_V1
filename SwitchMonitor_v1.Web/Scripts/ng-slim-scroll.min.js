angular.module("ngSlimScroll",[]).directive("slimScroll",["$window","$document","$timeout",function(a,b,c){var d="data-slim-scroll-init",e={minHeight:25,wrapperClass:"slim-scroll-wrapper",scrollbarContainerClass:"slim-scroll-scrollbar-container",scrollbarClass:"slim-scroll-scrollbar",specialClass:"animate"};return{restrict:"A",transclude:!0,replace:!0,scope:{options:"="},template:'<div><div class="slim-scroll-wrapper" data-ng-transclude></div></div>',link:function(f,g){g.removeAttr(d);var h=angular.extend({},e,f.options);c(function(){var c=g.children()[0],e=angular.element(c);if(c.offsetHeight<c.scrollHeight){g.attr(d,"1"),e.addClass(h.wrapperClass);var i=angular.element(a.document.createElement("div"));i.addClass(h.scrollbarContainerClass);var j=angular.element(a.document.createElement("div"));j.addClass(h.scrollbarClass),g.append(i),i.append(j);var k={},l=function(a){var b=document.documentElement.scrollTop;return a.getBoundingClientRect().top+(b?b:document.body.scrollTop)},m=function(a){var b=parseInt(j[0].style.top.replace("%",""))*a/100;return b?b:0},n=function(){k.height=i[0].offsetHeight,k.scrollHeight=c.scrollHeight,k.position=k.height/k.scrollHeight*100,k.scrollbarHeight=k.scrollHeight*k.height/100,k.scrollPosition=h.fixedHeight?h.fixedHeight/k.height*100:k.scrollbarHeight<h.minHeight?h.minHeight/k.height*100:k.position,k.remainder=100-k.scrollPosition,k.x=(k.scrollHeight-k.height)*((k.scrollPosition-k.position)/(100-k.position)),k.heightRate=Math.abs(k.x/k.remainder+k.scrollHeight/100),j[0].style.height=k.scrollPosition+"%",k.reposition=m(k.height)},o=function(a){a=a||event;var b=a.target||event.srcElement,d=b.parentElement||b.parentNode;if(k&&d!==i[0]){var e=a.pageY||event.clientY,f=(e-l(c.parentElement||c.parentNode))/k.height*100-k.scrollPosition/2;f>k.remainder?f=k.remainder:0>f&&(f=0),j[0].style.top=f+"%",c.scrollTop=f*k.heightRate,i.addClass(h.specialClass)}},p=function(d){var f=a.getSelection?a.getSelection():a.document.selection;f&&(f.removeAllRanges?f.removeAllRanges():f.empty&&f.empty()),d=d||event;d.currentTarget||d.srcElement;b.bind("mousemove",q),b.bind("mouseup",r),k.offsetTop=l(c),k.firstY=d.pageY||event.clientY,k.reposition||(k.reposition=m(k.height)),e.addClass("unselectable")},q=function(a){a=a||event;var b=a.pageY||a.clientY,d=(k.reposition+b-k.firstY)/k.height*100;k.remainder<d&&(d=k.remainder),k.previousTop||(k.previousTop=d+1);var e=d>=0&&k.firstY>k.offsetTop;(k.previousTop>d&&e||e&&c.scrollTop+k.height!==k.scrollHeight)&&(j[0].style.top=d+"%",k.previousTop=d,c.scrollTop=d*k.heightRate),i.removeClass(h.specialClass)},r=function(a){b.unbind("mousemove",q),b.unbind("mouseup",r),k.reposition=0,e.removeClass("unselectable"),i.addClass(h.specialClass)},s=function(a){k&&(i.removeClass(h.specialClass),j[0].style.top=c.scrollTop/k.heightRate+"%",i.addClass(h.specialClass))};h.keepFocus&&(e.attr("tabindex","-1"),c.focus()),j.bind("mousedown",p),i.bind("click",o),e.bind("scroll",s),angular.element(a).bind("resize",n),n(),f.$on("$destroy",function(){j.unbind("mousedown"),i.unbind("click"),e.unbind("scroll"),angular.element(a).unbind("resize",n)})}})}}}]);